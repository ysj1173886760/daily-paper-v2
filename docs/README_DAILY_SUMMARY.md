# æ¯æ—¥æ±‡æ€»å·¥ä½œæµä½¿ç”¨æŒ‡å—

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

æ¯æ—¥æ±‡æ€»å·¥ä½œæµå·²é›†æˆåˆ°ä¸»ç¨‹åºä¸­ï¼Œç”¨äºå¤„ç†å†å²æœªæ¨é€çš„æ—¥æŠ¥ï¼Œç¡®ä¿æ¯å¤©çš„è®ºæ–‡åˆ†æéƒ½èƒ½åŠæ—¶æ¨é€åˆ°é£ä¹¦ç¾¤ç»„ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯ç”¨åŠŸèƒ½

åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨æ¯æ—¥æ±‡æ€»åŠŸèƒ½ï¼š

**config/rag.yaml** (RAGè®ºæ–‡)
```yaml
daily_summary_enabled: true
daily_summary_tracker_file: "data/rag_report_tracker.json"
```

**config/kg.yaml** (çŸ¥è¯†å›¾è°±è®ºæ–‡)  
```yaml
daily_summary_enabled: true
daily_summary_tracker_file: "data/kg_report_tracker.json"
```

### 2. åŸºæœ¬ä½¿ç”¨

```bash
# å®Œæ•´æµç¨‹ï¼ˆå¤„ç†æ–°è®ºæ–‡ + æ¨é€ + æ¯æ—¥æ±‡æ€»ï¼‰
python main.py --config_path config/rag.yaml --mode full

# ä»…å‘å¸ƒæ¨¡å¼ï¼ˆæ¨é€ç°æœ‰è®ºæ–‡ + æ¯æ—¥æ±‡æ€»ï¼‰  
python main.py --config_path config/rag.yaml --mode publish

# ä»…å¤„ç†æ–°è®ºæ–‡ï¼ˆä¸ä¼šè§¦å‘æ¯æ—¥æ±‡æ€»ï¼‰
python main.py --config_path config/rag.yaml --mode summary
```

## âš™ï¸ é…ç½®é€‰é¡¹

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `daily_summary_enabled` | false | æ˜¯å¦å¯ç”¨æ¯æ—¥æ±‡æ€»åŠŸèƒ½ |
| `daily_summary_tracker_file` | - | æ¨é€çŠ¶æ€è·Ÿè¸ªæ–‡ä»¶è·¯å¾„ |
| `daily_summary_max_days` | 7 | æ‰¹é‡æ¨¡å¼æœ€å¤šå¤„ç†å¤©æ•° |
| `daily_summary_recommendation_count` | 3 | æ¯æ—¥æ¨èè®ºæ–‡æ•°é‡ |

## ğŸ”„ å·¥ä½œåŸç†

1. **è·å–å¾…å¤„ç†æ—¥æœŸ**: ä»è·Ÿè¸ªæ–‡ä»¶ä¸­æ‰¾åˆ°ä¸‹ä¸€ä¸ªæœªæ¨é€çš„æ—¥æœŸ
2. **è·å–è®ºæ–‡æ•°æ®**: å¤ç”¨ç°æœ‰çš„ `FetchYesterdayPapersNode` 
3. **åˆ†æå’Œæ¨è**: å¤ç”¨ç°æœ‰çš„ `AnalyzeAndRecommendPapersNode`
4. **æ¨é€åˆ°é£ä¹¦**: å¤ç”¨ç°æœ‰çš„ `PushDailyReportToFeishuNode`
5. **æ›´æ–°çŠ¶æ€**: è®°å½•æ¨é€ç»“æœï¼Œç¡®ä¿å¹‚ç­‰æ€§

## ğŸ“… å®šæ—¶ä»»åŠ¡è®¾ç½®

å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° crontabï¼ˆ`crontab -e`ï¼‰ï¼š

```bash
# æ¯å¤©ä¸Šåˆ9ç‚¹è¿è¡ŒRAGè®ºæ–‡å®Œæ•´æµç¨‹ï¼ˆåŒ…å«æ¯æ—¥æ±‡æ€»ï¼‰
0 9 * * * cd /path/to/daily-paper-v2 && python main.py --config_path config/rag.yaml --mode full

# æ¯å¤©ä¸Šåˆ10ç‚¹è¿è¡ŒçŸ¥è¯†å›¾è°±è®ºæ–‡å®Œæ•´æµç¨‹ï¼ˆåŒ…å«æ¯æ—¥æ±‡æ€»ï¼‰
0 10 * * * cd /path/to/daily-paper-v2 && python main.py --config_path config/kg.yaml --mode full

# æ¯å¤©ä¸‹åˆ6ç‚¹ä»…è¿è¡Œå‘å¸ƒæ¨¡å¼ï¼ˆæ¨é€ç°æœ‰è®ºæ–‡ + æ¯æ—¥æ±‡æ€»ï¼‰
0 18 * * * cd /path/to/daily-paper-v2 && python main.py --config_path config/rag.yaml --mode publish
```

## ğŸ›Ÿ æ•…éšœæ’é™¤

### åŠŸèƒ½æœªå¯ç”¨
å¦‚æœçœ‹åˆ°æ—¥å¿— `æ¯æ—¥æ±‡æ€»åŠŸèƒ½æœªå¯ç”¨ï¼Œè·³è¿‡`ï¼Œè¯´æ˜é…ç½®æ–‡ä»¶ä¸­æœªå¯ç”¨è¯¥åŠŸèƒ½ã€‚

**è§£å†³æ–¹æ¡ˆ**: åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  `daily_summary_enabled: true`

### æ²¡æœ‰è®ºæ–‡æ•°æ®
ç³»ç»Ÿä¼šè‡ªåŠ¨æ ‡è®°è¯¥æ—¥æœŸä¸º"æ— è®ºæ–‡çŠ¶æ€"ï¼Œé¿å…é‡å¤å°è¯•ã€‚æ—¥å¿—ä¼šæ˜¾ç¤ºç±»ä¼¼ï¼š
```
WARNING - 2025å¹´8æœˆ2æ—¥ æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆè®ºæ–‡ï¼Œæ ‡è®°ä¸ºæ— è®ºæ–‡çŠ¶æ€
```

### æ¨é€å¤±è´¥
æ¨é€å¤±è´¥ä¼šè¢«è®°å½•ï¼Œå¯ä»¥é‡æ–°è¿è¡Œå·¥ä½œæµæ¥é‡è¯•å¤±è´¥çš„æ—¥æœŸã€‚

### æ— é™å¾ªç¯å¤„ç†åŒä¸€æ—¥æœŸ
ç³»ç»Ÿæœ‰é˜²å¾ªç¯æœºåˆ¶ï¼Œå¦‚æœè¿ç»­å¤„ç†åŒä¸€æ—¥æœŸä¸”å¤±è´¥ï¼Œä¼šè‡ªåŠ¨åœæ­¢é¿å…æ— é™å¾ªç¯ã€‚

## ğŸ” æ•°æ®æ–‡ä»¶

- **è·Ÿè¸ªæ–‡ä»¶**: `data/rag_report_tracker.json` / `data/kg_report_tracker.json`
  - è®°å½•æ¯æ—¥æ¨é€çŠ¶æ€å’Œå†å²
  - ç¡®ä¿å·¥ä½œæµçš„å¹‚ç­‰æ€§

- **è®ºæ–‡æ•°æ®**: æ¥è‡ªç°æœ‰çš„ `meta_file_path` é…ç½®
  - RAG: `data/daily_papers.parquet`
  - KG: `data/daily_papers_kg.parquet`

## âœ¨ ç‰¹æ€§

- âœ… **å¹‚ç­‰æ€§**: ä¸ä¼šé‡å¤å¤„ç†å·²æ¨é€çš„æ—¥æœŸ
- âœ… **å¤ç”¨ç°æœ‰ç»„ä»¶**: æœ€å¤§åŒ–å¤ç”¨ç°æœ‰çš„èŠ‚ç‚¹å’Œé…ç½®
- âœ… **çµæ´»é…ç½®**: æ”¯æŒä¸åŒé¢†åŸŸçš„ç‹¬ç«‹é…ç½®
- âœ… **é”™è¯¯å¤„ç†**: ä¼˜é›…å¤„ç†å„ç§å¼‚å¸¸æƒ…å†µ
- âœ… **çŠ¶æ€è·Ÿè¸ª**: å®Œæ•´çš„æ¨é€å†å²è®°å½•