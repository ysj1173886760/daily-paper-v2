# RSS + GitHub Pages 发布方案

## 项目概述

将Daily Paper系统扩展，支持通过RSS发布论文摘要，并使用GitHub Pages提供静态网站服务，让用户可以通过RSS阅读器订阅最新的学术论文摘要。

## 整体架构

### 数据流向
```
ArXiv论文 → 智能过滤 → LLM分析 → Markdown摘要 → HTML转换 → RSS生成 → GitHub Pages发布
```

### 技术栈
- **RSS生成**: feedgen库（Python原生，零依赖）
- **HTML转换**: markdown库 + 自定义模板
- **静态站点**: 自定义HTML模板 + CSS
- **部署平台**: GitHub Pages（免费，自动化）
- **CI/CD**: GitHub Actions
- **域名**: GitHub提供的 `username.github.io` 或自定义域名

## 详细实施方案

### Phase 1: 扩展现有Flow

#### 当前流程
```
FetchPapersNode → FilterExistingPapersNode → [FilterIrrelevantPapersNode] → ProcessPapersV2Node → PushToFeishuNode
```

#### 扩展后流程
```
... → PushToFeishuNode → GenerateHTMLNode → PublishRSSNode → DeployStaticNode
```

### Phase 2: 核心组件设计

#### 2.1 新增Node节点

**GenerateHTMLNode**
- 功能：将Markdown摘要转换为HTML页面
- 输入：论文摘要数据
- 输出：HTML文件和静态资源

**PublishRSSNode**
- 功能：生成/更新RSS feed
- 输入：HTML文章数据
- 输出：rss.xml文件

**DeployStaticNode**（可选）
- 功能：准备GitHub Pages部署
- 输入：静态文件
- 输出：触发部署

#### 2.2 静态站点结构

```
public/
├── index.html              # 主页（论文列表）
├── rss.xml                 # RSS feed文件
├── posts/
│   ├── 2024-07-27-rag.html    # 每日论文HTML页面
│   └── 2024-07-27-kg.html
├── assets/
│   ├── style.css           # 样式文件
│   └── highlight.css       # 代码高亮样式
└── about.html              # 关于页面
```

#### 2.3 RSS Feed设计

- **频道信息**: Daily AI Papers - RAG & Knowledge Graph
- **更新频率**: 每日更新
- **内容格式**: 完整HTML内容，支持代码高亮
- **历史保留**: 最近100篇文章
- **分类支持**: RAG、Knowledge Graph等标签

### Phase 3: GitHub集成方案

#### 3.1 发布仓库结构

建议创建专门的发布仓库：`daily-papers-site`

```
daily-papers-site/
├── .github/workflows/
│   └── deploy.yml          # GitHub Actions工作流
├── templates/
│   ├── base.html           # 基础模板
│   ├── post.html           # 文章页面模板
│   └── index.html          # 首页模板
├── static/
│   ├── css/
│   │   ├── main.css
│   │   └── highlight.css
│   └── js/
└── public/                 # 生成的静态文件（部署目录）
```

#### 3.2 自动化部署流程

1. **触发方式**：
   - 主项目生成新内容后，调用GitHub API触发部署
   - 或者直接推送文件到站点仓库

2. **GitHub Actions工作流**：
   - 检测内容更新
   - 生成静态HTML页面
   - 更新RSS feed
   - 部署到gh-pages分支

3. **部署策略**：
   - 增量更新：只更新变化的文件
   - 缓存优化：静态资源CDN缓存
   - 回滚支持：保留历史版本

### Phase 4: 数据传输方案

#### 方案A: API调用（推荐）

```python
# 在主项目的DeployStaticNode中
def exec(self, prep_res):
    # 1. 准备发布数据
    publish_data = {
        "date": today,
        "articles": processed_articles,
        "template": template_type,
        "config": site_config
    }
    
    # 2. 调用GitHub API触发工作流
    response = requests.post(
        f"https://api.github.com/repos/{owner}/{site_repo}/dispatches",
        headers={"Authorization": f"token {github_token}"},
        json={
            "event_type": "publish_papers",
            "client_payload": publish_data
        }
    )
```

#### 方案B: 文件推送

直接将生成的HTML和RSS文件推送到站点仓库的特定分支。

### Phase 5: 模板系统集成

#### 5.1 利用现有模板

- **v1模板**: 简洁学术风格 → 对应简洁HTML样式
- **v2模板**: 详细分析风格 → 对应丰富HTML样式
- **simple模板**: 轻量阅读风格 → 对应移动友好样式

#### 5.2 HTML模板设计

```html
<!-- templates/post.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - Daily AI Papers</title>
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/highlight.css">
    <link rel="alternate" type="application/rss+xml" title="Daily AI Papers" href="/rss.xml">
</head>
<body>
    <header>
        <h1><a href="/">Daily AI Papers</a></h1>
        <nav>
            <a href="/rss.xml">RSS</a>
            <a href="/about.html">About</a>
        </nav>
    </header>
    <main>
        <article>
            <header>
                <h1>{{ title }}</h1>
                <time datetime="{{ date }}">{{ date_formatted }}</time>
                <div class="tags">
                    {% for tag in tags %}
                    <span class="tag">{{ tag }}</span>
                    {% endfor %}
                </div>
            </header>
            <div class="content">
                {{ content }}
            </div>
        </article>
    </main>
    <footer>
        <p>Generated by Daily Paper Processing System</p>
    </footer>
</body>
</html>
```

### Phase 6: RSS阅读器优化

#### 6.1 元数据丰富化

- **分类标签**: RAG、Knowledge Graph、Multi-Modal等
- **论文信息**: arXiv ID、作者、发布日期
- **重要性标记**: 高影响力论文特殊标记
- **相关链接**: 原文PDF、项目代码等

#### 6.2 内容优化

- **语法高亮**: 代码块支持多种编程语言
- **数学公式**: 支持LaTeX公式渲染（MathJax）
- **图片支持**: 论文图表和示意图
- **链接优化**: 论文引用和外部链接

#### 6.3 RSS Feed示例

```xml
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/"
     xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Daily AI Papers</title>
        <description>Latest papers in RAG and Knowledge Graph research</description>
        <link>https://your-username.github.io/daily-papers-site/</link>
        <atom:link href="https://your-username.github.io/daily-papers-site/rss.xml" 
                   rel="self" type="application/rss+xml"/>
        <language>zh-cn</language>
        <lastBuildDate>Mon, 27 Jul 2024 10:00:00 GMT</lastBuildDate>
        
        <item>
            <title>2024-07-27 RAG Papers Summary</title>
            <link>https://your-username.github.io/daily-papers-site/posts/2024-07-27-rag.html</link>
            <description>Today's highlights in RAG research...</description>
            <content:encoded><![CDATA[
                <h2>Top Papers</h2>
                <h3>Retrieval-Augmented Generation with Enhanced Context</h3>
                <p>This paper presents...</p>
                <!-- 完整HTML内容 -->
            ]]></content:encoded>
            <pubDate>Mon, 27 Jul 2024 09:00:00 GMT</pubDate>
            <guid>https://your-username.github.io/daily-papers-site/posts/2024-07-27-rag.html</guid>
            <category>RAG</category>
            <category>AI Research</category>
        </item>
    </channel>
</rss>
```

## 实施优势

### 技术优势
1. **零成本部署**: GitHub Pages免费托管
2. **高可用性**: GitHub的99.9%可用性保障
3. **全球CDN**: 快速访问体验
4. **版本控制**: Git管理所有内容变更

### 用户体验优势
1. **通用兼容**: 支持所有主流RSS阅读器
2. **离线阅读**: 内容本地缓存
3. **个性化**: 用户可选择关注的领域
4. **历史检索**: 完整的文章历史记录

### 内容管理优势
1. **自动化**: 无需人工干预的发布流程
2. **一致性**: 统一的内容格式和样式
3. **扩展性**: 易于添加新的内容类型
4. **维护性**: 模块化的代码结构

## 实施时间线

### 第一阶段（1-2天）：基础RSS功能
- [ ] 实现GenerateHTMLNode
- [ ] 实现PublishRSSNode
- [ ] 集成到现有Flow中
- [ ] 本地测试RSS生成

### 第二阶段（2-3天）：静态站点
- [ ] 设计HTML模板
- [ ] 实现静态站点生成
- [ ] 样式和响应式设计
- [ ] 本地预览测试

### 第三阶段（2-3天）：GitHub集成
- [ ] 创建GitHub Pages仓库
- [ ] 配置GitHub Actions
- [ ] 实现自动部署
- [ ] 域名和SSL配置

### 第四阶段（1-2天）：优化和测试
- [ ] RSS阅读器兼容性测试
- [ ] 性能优化
- [ ] 错误处理和监控
- [ ] 文档和使用指南

## 配置参数

### RSS配置
```yaml
rss:
  title: "Daily AI Papers"
  description: "Latest papers in AI research"
  language: "zh-cn"
  max_items: 100
  categories: ["RAG", "Knowledge Graph", "Multi-Modal"]
```

### 站点配置
```yaml
site:
  title: "Daily AI Papers"
  url: "https://your-username.github.io/daily-papers-site/"
  author: "AI Research Team"
  theme: "academic"
  features:
    - syntax_highlighting
    - math_rendering
    - responsive_design
```

### GitHub配置
```yaml
github:
  owner: "your-username"
  repo: "daily-papers-site"
  branch: "gh-pages"
  token: "${GITHUB_TOKEN}"
```

## 监控和维护

### 关键指标
- RSS订阅数量
- 站点访问统计
- 内容更新频率
- 错误率和可用性

### 维护任务
- 定期检查RSS feed有效性
- 监控GitHub Pages部署状态
- 更新依赖库和安全补丁
- 备份重要数据

## 扩展规划

### 短期扩展
- 多语言支持（英文版本）
- 搜索功能
- 标签过滤
- 订阅分类

### 长期扩展
- 用户评论系统
- 论文推荐算法
- API接口开放
- 移动应用

---

*该方案文档将随着实施进展持续更新*